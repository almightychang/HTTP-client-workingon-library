ARM GAS  /tmp/ccPT9Xa3.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"tcp_client.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.tcp_callback_poll,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	tcp_callback_poll:
  26              	.LVL0:
  27              	.LFB175:
  28              		.file 1 "Core/Src/tcp_client.c"
   1:Core/Src/tcp_client.c **** /*
   2:Core/Src/tcp_client.c ****  * tcp_client.c
   3:Core/Src/tcp_client.c ****  *
   4:Core/Src/tcp_client.c ****  *  Created on: 2020. 3. 12.
   5:Core/Src/tcp_client.c ****  *      Author: KIKI
   6:Core/Src/tcp_client.c ****  */
   7:Core/Src/tcp_client.c **** 
   8:Core/Src/tcp_client.c **** #include <tcp_client.h>
   9:Core/Src/tcp_client.c **** 
  10:Core/Src/tcp_client.c **** static struct tcp_pcb *pcb_client; //client pcb
  11:Core/Src/tcp_client.c **** static ip_addr_t server_addr; //server ip
  12:Core/Src/tcp_client.c **** 
  13:Core/Src/tcp_client.c **** struct time_packet packet; //256 bytes time_packet structure
  14:Core/Src/tcp_client.c **** uint16_t nRead = 0; //read buffer index
  15:Core/Src/tcp_client.c **** uint16_t nWritten = 0; //write buffer index
  16:Core/Src/tcp_client.c **** 
  17:Core/Src/tcp_client.c **** /* callback functions */
  18:Core/Src/tcp_client.c **** static err_t tcp_callback_connected(void *arg, struct tcp_pcb *pcb_new, err_t err);
  19:Core/Src/tcp_client.c **** static err_t tcp_callback_sent(void *arg, struct tcp_pcb *tpcb, u16_t len);
  20:Core/Src/tcp_client.c **** static err_t tcp_callback_received(void *arg, struct tcp_pcb *tpcb, struct pbuf *p, err_t err);
  21:Core/Src/tcp_client.c **** static err_t tcp_callback_poll(void *arg, struct tcp_pcb *tpcb);
  22:Core/Src/tcp_client.c **** static void tcp_callback_error(void *arg, err_t err);
  23:Core/Src/tcp_client.c **** 
  24:Core/Src/tcp_client.c **** /* functions */
  25:Core/Src/tcp_client.c **** static void app_open_conn(void); //open function
  26:Core/Src/tcp_client.c **** static void app_close_conn(void); //close function
  27:Core/Src/tcp_client.c **** static void app_send_data(void); //send function
  28:Core/Src/tcp_client.c **** 
  29:Core/Src/tcp_client.c **** /*
  30:Core/Src/tcp_client.c ****  * app_start_get_time
ARM GAS  /tmp/ccPT9Xa3.s 			page 2


  31:Core/Src/tcp_client.c ****  * initiate process (tcp_connect => tcp_callback_connected => tcp_write => tcp_callback_received =>
  32:Core/Src/tcp_client.c ****  */
  33:Core/Src/tcp_client.c **** void app_start_get_time(void)
  34:Core/Src/tcp_client.c **** {
  35:Core/Src/tcp_client.c ****   app_open_conn();
  36:Core/Src/tcp_client.c **** }
  37:Core/Src/tcp_client.c **** 
  38:Core/Src/tcp_client.c **** /*
  39:Core/Src/tcp_client.c ****  * app_open_connection
  40:Core/Src/tcp_client.c ****  * create a client pcb & call tcp_connect
  41:Core/Src/tcp_client.c ****  */
  42:Core/Src/tcp_client.c **** static void app_open_conn(void)
  43:Core/Src/tcp_client.c **** {
  44:Core/Src/tcp_client.c ****   err_t err;
  45:Core/Src/tcp_client.c **** 
  46:Core/Src/tcp_client.c ****   if (pcb_client == NULL)
  47:Core/Src/tcp_client.c ****   {
  48:Core/Src/tcp_client.c ****     pcb_client = tcp_new();
  49:Core/Src/tcp_client.c ****     if (pcb_client == NULL) //lack of memory
  50:Core/Src/tcp_client.c ****     {
  51:Core/Src/tcp_client.c ****       memp_free(MEMP_TCP_PCB, pcb_client);
  52:Core/Src/tcp_client.c ****       pcb_client = NULL;
  53:Core/Src/tcp_client.c ****       HAL_GPIO_WritePin(LD2_GPIO_Port, LD2_Pin, GPIO_PIN_SET); //error led
  54:Core/Src/tcp_client.c ****     }
  55:Core/Src/tcp_client.c ****   }
  56:Core/Src/tcp_client.c **** 
  57:Core/Src/tcp_client.c ****   IP4_ADDR(&server_addr, SERVER_IP1, SERVER_IP2, SERVER_IP3, SERVER_IP4); //server ip
  58:Core/Src/tcp_client.c ****   err = tcp_connect(pcb_client, &server_addr, SERVER_PORT, tcp_callback_connected); //connect
  59:Core/Src/tcp_client.c **** 
  60:Core/Src/tcp_client.c ****   if(err == ERR_ISCONN) //already connected
  61:Core/Src/tcp_client.c ****   {
  62:Core/Src/tcp_client.c ****     app_close_conn();
  63:Core/Src/tcp_client.c ****   }
  64:Core/Src/tcp_client.c **** }
  65:Core/Src/tcp_client.c **** 
  66:Core/Src/tcp_client.c **** /*
  67:Core/Src/tcp_client.c ****  * tcp_callback_connected
  68:Core/Src/tcp_client.c ****  * callback when connected, client sends a request to the server
  69:Core/Src/tcp_client.c ****  */
  70:Core/Src/tcp_client.c **** static err_t tcp_callback_connected(void *arg, struct tcp_pcb *pcb_new, err_t err)
  71:Core/Src/tcp_client.c **** {
  72:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(arg);
  73:Core/Src/tcp_client.c **** 
  74:Core/Src/tcp_client.c ****   if (err != ERR_OK) //error when connect to the server
  75:Core/Src/tcp_client.c ****   {
  76:Core/Src/tcp_client.c ****     return err;
  77:Core/Src/tcp_client.c ****   }
  78:Core/Src/tcp_client.c **** 
  79:Core/Src/tcp_client.c ****   tcp_setprio(pcb_new, TCP_PRIO_NORMAL); //set priority for the client pcb
  80:Core/Src/tcp_client.c **** 
  81:Core/Src/tcp_client.c ****   tcp_arg(pcb_new, 0); //no argument is used
  82:Core/Src/tcp_client.c ****   tcp_sent(pcb_new, tcp_callback_sent); //register send callback
  83:Core/Src/tcp_client.c ****   tcp_recv(pcb_new, tcp_callback_received);  //register receive callback
  84:Core/Src/tcp_client.c ****   tcp_err(pcb_new, tcp_callback_error); //register error callback
  85:Core/Src/tcp_client.c ****   tcp_poll(pcb_new, tcp_callback_poll, 0); //register poll callback
  86:Core/Src/tcp_client.c **** 
  87:Core/Src/tcp_client.c ****   app_send_data(); //send a request
ARM GAS  /tmp/ccPT9Xa3.s 			page 3


  88:Core/Src/tcp_client.c **** 
  89:Core/Src/tcp_client.c ****   return ERR_OK;
  90:Core/Src/tcp_client.c **** }
  91:Core/Src/tcp_client.c **** 
  92:Core/Src/tcp_client.c **** /*
  93:Core/Src/tcp_client.c ****  * app_send_data
  94:Core/Src/tcp_client.c ****  * send the request to the server
  95:Core/Src/tcp_client.c ****  */
  96:Core/Src/tcp_client.c **** static void app_send_data(void)
  97:Core/Src/tcp_client.c **** {
  98:Core/Src/tcp_client.c ****   memset(&packet, 1, sizeof(struct time_packet));
  99:Core/Src/tcp_client.c ****   packet.head = 0xAE; //head
 100:Core/Src/tcp_client.c ****   packet.type = REQ; //request type
 101:Core/Src/tcp_client.c ****   packet.tail = 0xEA; //tail
 102:Core/Src/tcp_client.c **** 
 103:Core/Src/tcp_client.c ****   nWritten = 0; //clear index
 104:Core/Src/tcp_client.c ****   //tcp_write(pcb_client, &packet,sizeof(struct time_packet), TCP_WRITE_FLAG_COPY); //use copied da
 105:Core/Src/tcp_client.c ****   tcp_write(pcb_client, &packet,sizeof(struct time_packet), 0); //use pointer, should not changed u
 106:Core/Src/tcp_client.c **** }
 107:Core/Src/tcp_client.c **** 
 108:Core/Src/tcp_client.c **** /*
 109:Core/Src/tcp_client.c ****  * tcp_callback_sent
 110:Core/Src/tcp_client.c ****  * callback when data sending is finished, control leds
 111:Core/Src/tcp_client.c ****  */
 112:Core/Src/tcp_client.c **** static err_t tcp_callback_sent(void *arg, struct tcp_pcb *tpcb, u16_t len)
 113:Core/Src/tcp_client.c **** {
 114:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(arg);
 115:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(tpcb);
 116:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(len);
 117:Core/Src/tcp_client.c **** 
 118:Core/Src/tcp_client.c ****   nWritten += len;
 119:Core/Src/tcp_client.c **** 
 120:Core/Src/tcp_client.c ****   if(nWritten < sizeof(struct time_packet)) //need to flush remain data
 121:Core/Src/tcp_client.c ****   {
 122:Core/Src/tcp_client.c ****     tcp_output(pcb_client); //flush
 123:Core/Src/tcp_client.c ****   }
 124:Core/Src/tcp_client.c ****   else if(nWritten > sizeof(struct time_packet)) //invalid length of sent data
 125:Core/Src/tcp_client.c ****   {
 126:Core/Src/tcp_client.c ****     HAL_GPIO_WritePin(LD2_GPIO_Port, LD2_Pin, GPIO_PIN_SET); //error led
 127:Core/Src/tcp_client.c ****     app_close_conn();
 128:Core/Src/tcp_client.c ****   }
 129:Core/Src/tcp_client.c ****   else
 130:Core/Src/tcp_client.c ****   {
 131:Core/Src/tcp_client.c ****     HAL_GPIO_TogglePin(LD3_GPIO_Port, LD3_Pin); //blink green when sent O.K
 132:Core/Src/tcp_client.c ****   }
 133:Core/Src/tcp_client.c **** 
 134:Core/Src/tcp_client.c ****   return ERR_OK;
 135:Core/Src/tcp_client.c **** }
 136:Core/Src/tcp_client.c **** 
 137:Core/Src/tcp_client.c **** /*
 138:Core/Src/tcp_client.c ****  * tcp_callback_received
 139:Core/Src/tcp_client.c ****  * callback when data is received, validate received data and parse it
 140:Core/Src/tcp_client.c ****  */
 141:Core/Src/tcp_client.c **** static err_t tcp_callback_received(void *arg, struct tcp_pcb *tpcb, struct pbuf *p, err_t err)
 142:Core/Src/tcp_client.c **** {
 143:Core/Src/tcp_client.c ****   err_t ret_err;
 144:Core/Src/tcp_client.c **** 
ARM GAS  /tmp/ccPT9Xa3.s 			page 4


 145:Core/Src/tcp_client.c ****   if (p == NULL) //pbuf is null when session is closed
 146:Core/Src/tcp_client.c ****   {
 147:Core/Src/tcp_client.c ****     app_close_conn();
 148:Core/Src/tcp_client.c ****     ret_err = ERR_OK;
 149:Core/Src/tcp_client.c ****   }
 150:Core/Src/tcp_client.c ****   else if (err != ERR_OK) //ERR_ABRT is returned when called tcp_abort
 151:Core/Src/tcp_client.c ****   {
 152:Core/Src/tcp_client.c ****     tcp_recved(tpcb, p->tot_len); //advertise window size
 153:Core/Src/tcp_client.c **** 
 154:Core/Src/tcp_client.c ****     pbuf_free(p); //free pbuf
 155:Core/Src/tcp_client.c ****     ret_err = err;
 156:Core/Src/tcp_client.c ****   }
 157:Core/Src/tcp_client.c ****   else //receiving data
 158:Core/Src/tcp_client.c ****   {
 159:Core/Src/tcp_client.c ****     tcp_recved(tpcb, p->tot_len); //advertise window size
 160:Core/Src/tcp_client.c **** 
 161:Core/Src/tcp_client.c ****     memcpy(&packet + nRead, p->payload, p->len);
 162:Core/Src/tcp_client.c ****     nRead += p->len;
 163:Core/Src/tcp_client.c **** 
 164:Core/Src/tcp_client.c ****     if(nRead == sizeof(struct time_packet) && packet.type == RESP) //if received length is valid
 165:Core/Src/tcp_client.c ****     {
 166:Core/Src/tcp_client.c ****       nRead = 0;
 167:Core/Src/tcp_client.c **** 
 168:Core/Src/tcp_client.c ****       printf("%04d-%02d-%02d %02d:%02d:%02d\n",
 169:Core/Src/tcp_client.c ****              packet.year + 2000,
 170:Core/Src/tcp_client.c ****              packet.month, packet.day, packet.hour, packet.minute, packet.second); //print time inf
 171:Core/Src/tcp_client.c **** 
 172:Core/Src/tcp_client.c ****       app_close_conn(); //close connection
 173:Core/Src/tcp_client.c ****     }
 174:Core/Src/tcp_client.c ****     else if(nRead > sizeof(struct time_packet))
 175:Core/Src/tcp_client.c ****     {
 176:Core/Src/tcp_client.c ****       nRead = 0;
 177:Core/Src/tcp_client.c ****       app_close_conn(); //close connection
 178:Core/Src/tcp_client.c ****     }
 179:Core/Src/tcp_client.c **** 
 180:Core/Src/tcp_client.c ****     pbuf_free(p); //free pbuf
 181:Core/Src/tcp_client.c ****     ret_err = ERR_OK;
 182:Core/Src/tcp_client.c ****   }
 183:Core/Src/tcp_client.c **** 
 184:Core/Src/tcp_client.c ****   return ret_err;
 185:Core/Src/tcp_client.c **** }
 186:Core/Src/tcp_client.c **** 
 187:Core/Src/tcp_client.c **** /*
 188:Core/Src/tcp_client.c ****  * app_close_conn
 189:Core/Src/tcp_client.c ****  * close connection & clear callbacks
 190:Core/Src/tcp_client.c ****  */
 191:Core/Src/tcp_client.c **** static void app_close_conn(void)
 192:Core/Src/tcp_client.c **** {
 193:Core/Src/tcp_client.c ****   /* clear callback functions */
 194:Core/Src/tcp_client.c ****   tcp_arg(pcb_client, NULL);
 195:Core/Src/tcp_client.c ****   tcp_sent(pcb_client, NULL);
 196:Core/Src/tcp_client.c ****   tcp_recv(pcb_client, NULL);
 197:Core/Src/tcp_client.c ****   tcp_err(pcb_client, NULL);
 198:Core/Src/tcp_client.c ****   tcp_poll(pcb_client, NULL, 0);
 199:Core/Src/tcp_client.c **** 
 200:Core/Src/tcp_client.c ****   tcp_close(pcb_client);    //close connection
 201:Core/Src/tcp_client.c ****   pcb_client = NULL;
ARM GAS  /tmp/ccPT9Xa3.s 			page 5


 202:Core/Src/tcp_client.c **** 
 203:Core/Src/tcp_client.c **** 
 204:Core/Src/tcp_client.c **** }
 205:Core/Src/tcp_client.c **** 
 206:Core/Src/tcp_client.c **** /*
 207:Core/Src/tcp_client.c ****  *  error callback
 208:Core/Src/tcp_client.c ****  *  call when there's an error, turn on an error led
 209:Core/Src/tcp_client.c ****  */
 210:Core/Src/tcp_client.c **** static void tcp_callback_error(void *arg, err_t err)
 211:Core/Src/tcp_client.c **** {
 212:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(arg);
 213:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(err);
 214:Core/Src/tcp_client.c **** 
 215:Core/Src/tcp_client.c ****   HAL_GPIO_WritePin(LD2_GPIO_Port, LD2_Pin, GPIO_PIN_SET); //error loed
 216:Core/Src/tcp_client.c **** }
 217:Core/Src/tcp_client.c **** 
 218:Core/Src/tcp_client.c **** /*
 219:Core/Src/tcp_client.c ****  * poll callback
 220:Core/Src/tcp_client.c ****  * called when lwip is idle, do something such as watchdog reset
 221:Core/Src/tcp_client.c ****  */
 222:Core/Src/tcp_client.c **** static err_t tcp_callback_poll(void *arg, struct tcp_pcb *tpcb)
 223:Core/Src/tcp_client.c **** {
  29              		.loc 1 223 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
 224:Core/Src/tcp_client.c ****   return ERR_OK;
  34              		.loc 1 224 3 view .LVU1
 225:Core/Src/tcp_client.c **** }
  35              		.loc 1 225 1 is_stmt 0 view .LVU2
  36 0000 0020     		movs	r0, #0
  37              	.LVL1:
  38              		.loc 1 225 1 view .LVU3
  39 0002 7047     		bx	lr
  40              		.cfi_endproc
  41              	.LFE175:
  43              		.section	.text.tcp_callback_error,"ax",%progbits
  44              		.align	1
  45              		.syntax unified
  46              		.thumb
  47              		.thumb_func
  49              	tcp_callback_error:
  50              	.LVL2:
  51              	.LFB174:
 211:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(arg);
  52              		.loc 1 211 1 is_stmt 1 view -0
  53              		.cfi_startproc
  54              		@ args = 0, pretend = 0, frame = 0
  55              		@ frame_needed = 0, uses_anonymous_args = 0
 211:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(arg);
  56              		.loc 1 211 1 is_stmt 0 view .LVU5
  57 0000 08B5     		push	{r3, lr}
  58              	.LCFI0:
  59              		.cfi_def_cfa_offset 8
  60              		.cfi_offset 3, -8
  61              		.cfi_offset 14, -4
ARM GAS  /tmp/ccPT9Xa3.s 			page 6


 212:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(err);
  62              		.loc 1 212 3 is_stmt 1 view .LVU6
 213:Core/Src/tcp_client.c **** 
  63              		.loc 1 213 3 view .LVU7
 215:Core/Src/tcp_client.c **** }
  64              		.loc 1 215 3 view .LVU8
  65 0002 0122     		movs	r2, #1
  66 0004 8021     		movs	r1, #128
  67              	.LVL3:
 215:Core/Src/tcp_client.c **** }
  68              		.loc 1 215 3 is_stmt 0 view .LVU9
  69 0006 0248     		ldr	r0, .L4
  70              	.LVL4:
 215:Core/Src/tcp_client.c **** }
  71              		.loc 1 215 3 view .LVU10
  72 0008 FFF7FEFF 		bl	HAL_GPIO_WritePin
  73              	.LVL5:
 216:Core/Src/tcp_client.c **** 
  74              		.loc 1 216 1 view .LVU11
  75 000c 08BD     		pop	{r3, pc}
  76              	.L5:
  77 000e 00BF     		.align	2
  78              	.L4:
  79 0010 00040240 		.word	1073873920
  80              		.cfi_endproc
  81              	.LFE174:
  83              		.section	.text.app_send_data,"ax",%progbits
  84              		.align	1
  85              		.syntax unified
  86              		.thumb
  87              		.thumb_func
  89              	app_send_data:
  90              	.LFB170:
  97:Core/Src/tcp_client.c ****   memset(&packet, 1, sizeof(struct time_packet));
  91              		.loc 1 97 1 is_stmt 1 view -0
  92              		.cfi_startproc
  93              		@ args = 0, pretend = 0, frame = 0
  94              		@ frame_needed = 0, uses_anonymous_args = 0
  95 0000 10B5     		push	{r4, lr}
  96              	.LCFI1:
  97              		.cfi_def_cfa_offset 8
  98              		.cfi_offset 4, -8
  99              		.cfi_offset 14, -4
  98:Core/Src/tcp_client.c ****   packet.head = 0xAE; //head
 100              		.loc 1 98 3 view .LVU13
 101 0002 0C4C     		ldr	r4, .L8
 102 0004 4FF48072 		mov	r2, #256
 103 0008 0121     		movs	r1, #1
 104 000a 2046     		mov	r0, r4
 105 000c FFF7FEFF 		bl	memset
 106              	.LVL6:
  99:Core/Src/tcp_client.c ****   packet.type = REQ; //request type
 107              		.loc 1 99 3 view .LVU14
  99:Core/Src/tcp_client.c ****   packet.type = REQ; //request type
 108              		.loc 1 99 15 is_stmt 0 view .LVU15
 109 0010 AE23     		movs	r3, #174
 110 0012 2370     		strb	r3, [r4]
ARM GAS  /tmp/ccPT9Xa3.s 			page 7


 100:Core/Src/tcp_client.c ****   packet.tail = 0xEA; //tail
 111              		.loc 1 100 3 is_stmt 1 view .LVU16
 100:Core/Src/tcp_client.c ****   packet.tail = 0xEA; //tail
 112              		.loc 1 100 15 is_stmt 0 view .LVU17
 113 0014 0023     		movs	r3, #0
 114 0016 6370     		strb	r3, [r4, #1]
 101:Core/Src/tcp_client.c **** 
 115              		.loc 1 101 3 is_stmt 1 view .LVU18
 101:Core/Src/tcp_client.c **** 
 116              		.loc 1 101 15 is_stmt 0 view .LVU19
 117 0018 EA22     		movs	r2, #234
 118 001a 84F8FF20 		strb	r2, [r4, #255]
 103:Core/Src/tcp_client.c ****   //tcp_write(pcb_client, &packet,sizeof(struct time_packet), TCP_WRITE_FLAG_COPY); //use copied da
 119              		.loc 1 103 3 is_stmt 1 view .LVU20
 103:Core/Src/tcp_client.c ****   //tcp_write(pcb_client, &packet,sizeof(struct time_packet), TCP_WRITE_FLAG_COPY); //use copied da
 120              		.loc 1 103 12 is_stmt 0 view .LVU21
 121 001e 064A     		ldr	r2, .L8+4
 122 0020 1380     		strh	r3, [r2]	@ movhi
 105:Core/Src/tcp_client.c **** }
 123              		.loc 1 105 3 is_stmt 1 view .LVU22
 124 0022 4FF48072 		mov	r2, #256
 125 0026 2146     		mov	r1, r4
 126 0028 0448     		ldr	r0, .L8+8
 127 002a 0068     		ldr	r0, [r0]
 128 002c FFF7FEFF 		bl	tcp_write
 129              	.LVL7:
 106:Core/Src/tcp_client.c **** 
 130              		.loc 1 106 1 is_stmt 0 view .LVU23
 131 0030 10BD     		pop	{r4, pc}
 132              	.L9:
 133 0032 00BF     		.align	2
 134              	.L8:
 135 0034 00000000 		.word	.LANCHOR0
 136 0038 00000000 		.word	.LANCHOR1
 137 003c 00000000 		.word	.LANCHOR2
 138              		.cfi_endproc
 139              	.LFE170:
 141              		.section	.text.tcp_callback_connected,"ax",%progbits
 142              		.align	1
 143              		.syntax unified
 144              		.thumb
 145              		.thumb_func
 147              	tcp_callback_connected:
 148              	.LVL8:
 149              	.LFB169:
  71:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(arg);
 150              		.loc 1 71 1 is_stmt 1 view -0
 151              		.cfi_startproc
 152              		@ args = 0, pretend = 0, frame = 0
 153              		@ frame_needed = 0, uses_anonymous_args = 0
  71:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(arg);
 154              		.loc 1 71 1 is_stmt 0 view .LVU25
 155 0000 38B5     		push	{r3, r4, r5, lr}
 156              	.LCFI2:
 157              		.cfi_def_cfa_offset 16
 158              		.cfi_offset 3, -16
 159              		.cfi_offset 4, -12
ARM GAS  /tmp/ccPT9Xa3.s 			page 8


 160              		.cfi_offset 5, -8
 161              		.cfi_offset 14, -4
  72:Core/Src/tcp_client.c **** 
 162              		.loc 1 72 3 is_stmt 1 view .LVU26
  74:Core/Src/tcp_client.c ****   {
 163              		.loc 1 74 3 view .LVU27
  74:Core/Src/tcp_client.c ****   {
 164              		.loc 1 74 6 is_stmt 0 view .LVU28
 165 0002 1546     		mov	r5, r2
 166 0004 0AB1     		cbz	r2, .L13
 167              	.LVL9:
 168              	.L11:
  90:Core/Src/tcp_client.c **** 
 169              		.loc 1 90 1 view .LVU29
 170 0006 2846     		mov	r0, r5
 171 0008 38BD     		pop	{r3, r4, r5, pc}
 172              	.LVL10:
 173              	.L13:
  90:Core/Src/tcp_client.c **** 
 174              		.loc 1 90 1 view .LVU30
 175 000a 0C46     		mov	r4, r1
  79:Core/Src/tcp_client.c **** 
 176              		.loc 1 79 3 is_stmt 1 view .LVU31
 177 000c 4021     		movs	r1, #64
 178              	.LVL11:
  79:Core/Src/tcp_client.c **** 
 179              		.loc 1 79 3 is_stmt 0 view .LVU32
 180 000e 2046     		mov	r0, r4
 181              	.LVL12:
  79:Core/Src/tcp_client.c **** 
 182              		.loc 1 79 3 view .LVU33
 183 0010 FFF7FEFF 		bl	tcp_setprio
 184              	.LVL13:
  81:Core/Src/tcp_client.c ****   tcp_sent(pcb_new, tcp_callback_sent); //register send callback
 185              		.loc 1 81 3 is_stmt 1 view .LVU34
 186 0014 0021     		movs	r1, #0
 187 0016 2046     		mov	r0, r4
 188 0018 FFF7FEFF 		bl	tcp_arg
 189              	.LVL14:
  82:Core/Src/tcp_client.c ****   tcp_recv(pcb_new, tcp_callback_received);  //register receive callback
 190              		.loc 1 82 3 view .LVU35
 191 001c 0949     		ldr	r1, .L14
 192 001e 2046     		mov	r0, r4
 193 0020 FFF7FEFF 		bl	tcp_sent
 194              	.LVL15:
  83:Core/Src/tcp_client.c ****   tcp_err(pcb_new, tcp_callback_error); //register error callback
 195              		.loc 1 83 3 view .LVU36
 196 0024 0849     		ldr	r1, .L14+4
 197 0026 2046     		mov	r0, r4
 198 0028 FFF7FEFF 		bl	tcp_recv
 199              	.LVL16:
  84:Core/Src/tcp_client.c ****   tcp_poll(pcb_new, tcp_callback_poll, 0); //register poll callback
 200              		.loc 1 84 3 view .LVU37
 201 002c 0749     		ldr	r1, .L14+8
 202 002e 2046     		mov	r0, r4
 203 0030 FFF7FEFF 		bl	tcp_err
 204              	.LVL17:
ARM GAS  /tmp/ccPT9Xa3.s 			page 9


  85:Core/Src/tcp_client.c **** 
 205              		.loc 1 85 3 view .LVU38
 206 0034 0022     		movs	r2, #0
 207 0036 0649     		ldr	r1, .L14+12
 208 0038 2046     		mov	r0, r4
 209 003a FFF7FEFF 		bl	tcp_poll
 210              	.LVL18:
  87:Core/Src/tcp_client.c **** 
 211              		.loc 1 87 3 view .LVU39
 212 003e FFF7FEFF 		bl	app_send_data
 213              	.LVL19:
  89:Core/Src/tcp_client.c **** }
 214              		.loc 1 89 3 view .LVU40
  89:Core/Src/tcp_client.c **** }
 215              		.loc 1 89 10 is_stmt 0 view .LVU41
 216 0042 E0E7     		b	.L11
 217              	.L15:
 218              		.align	2
 219              	.L14:
 220 0044 00000000 		.word	tcp_callback_sent
 221 0048 00000000 		.word	tcp_callback_received
 222 004c 00000000 		.word	tcp_callback_error
 223 0050 00000000 		.word	tcp_callback_poll
 224              		.cfi_endproc
 225              	.LFE169:
 227              		.section	.text.app_close_conn,"ax",%progbits
 228              		.align	1
 229              		.syntax unified
 230              		.thumb
 231              		.thumb_func
 233              	app_close_conn:
 234              	.LFB173:
 192:Core/Src/tcp_client.c ****   /* clear callback functions */
 235              		.loc 1 192 1 is_stmt 1 view -0
 236              		.cfi_startproc
 237              		@ args = 0, pretend = 0, frame = 0
 238              		@ frame_needed = 0, uses_anonymous_args = 0
 239 0000 10B5     		push	{r4, lr}
 240              	.LCFI3:
 241              		.cfi_def_cfa_offset 8
 242              		.cfi_offset 4, -8
 243              		.cfi_offset 14, -4
 194:Core/Src/tcp_client.c ****   tcp_sent(pcb_client, NULL);
 244              		.loc 1 194 3 view .LVU43
 245 0002 0E4C     		ldr	r4, .L18
 246 0004 0021     		movs	r1, #0
 247 0006 2068     		ldr	r0, [r4]
 248 0008 FFF7FEFF 		bl	tcp_arg
 249              	.LVL20:
 195:Core/Src/tcp_client.c ****   tcp_recv(pcb_client, NULL);
 250              		.loc 1 195 3 view .LVU44
 251 000c 0021     		movs	r1, #0
 252 000e 2068     		ldr	r0, [r4]
 253 0010 FFF7FEFF 		bl	tcp_sent
 254              	.LVL21:
 196:Core/Src/tcp_client.c ****   tcp_err(pcb_client, NULL);
 255              		.loc 1 196 3 view .LVU45
ARM GAS  /tmp/ccPT9Xa3.s 			page 10


 256 0014 0021     		movs	r1, #0
 257 0016 2068     		ldr	r0, [r4]
 258 0018 FFF7FEFF 		bl	tcp_recv
 259              	.LVL22:
 197:Core/Src/tcp_client.c ****   tcp_poll(pcb_client, NULL, 0);
 260              		.loc 1 197 3 view .LVU46
 261 001c 0021     		movs	r1, #0
 262 001e 2068     		ldr	r0, [r4]
 263 0020 FFF7FEFF 		bl	tcp_err
 264              	.LVL23:
 198:Core/Src/tcp_client.c **** 
 265              		.loc 1 198 3 view .LVU47
 266 0024 0022     		movs	r2, #0
 267 0026 1146     		mov	r1, r2
 268 0028 2068     		ldr	r0, [r4]
 269 002a FFF7FEFF 		bl	tcp_poll
 270              	.LVL24:
 200:Core/Src/tcp_client.c ****   pcb_client = NULL;
 271              		.loc 1 200 3 view .LVU48
 272 002e 2068     		ldr	r0, [r4]
 273 0030 FFF7FEFF 		bl	tcp_close
 274              	.LVL25:
 201:Core/Src/tcp_client.c **** 
 275              		.loc 1 201 3 view .LVU49
 201:Core/Src/tcp_client.c **** 
 276              		.loc 1 201 14 is_stmt 0 view .LVU50
 277 0034 0023     		movs	r3, #0
 278 0036 2360     		str	r3, [r4]
 204:Core/Src/tcp_client.c **** 
 279              		.loc 1 204 1 view .LVU51
 280 0038 10BD     		pop	{r4, pc}
 281              	.L19:
 282 003a 00BF     		.align	2
 283              	.L18:
 284 003c 00000000 		.word	.LANCHOR2
 285              		.cfi_endproc
 286              	.LFE173:
 288              		.section	.text.app_open_conn,"ax",%progbits
 289              		.align	1
 290              		.syntax unified
 291              		.thumb
 292              		.thumb_func
 294              	app_open_conn:
 295              	.LFB168:
  43:Core/Src/tcp_client.c ****   err_t err;
 296              		.loc 1 43 1 is_stmt 1 view -0
 297              		.cfi_startproc
 298              		@ args = 0, pretend = 0, frame = 0
 299              		@ frame_needed = 0, uses_anonymous_args = 0
 300 0000 08B5     		push	{r3, lr}
 301              	.LCFI4:
 302              		.cfi_def_cfa_offset 8
 303              		.cfi_offset 3, -8
 304              		.cfi_offset 14, -4
  44:Core/Src/tcp_client.c **** 
 305              		.loc 1 44 3 view .LVU53
  46:Core/Src/tcp_client.c ****   {
ARM GAS  /tmp/ccPT9Xa3.s 			page 11


 306              		.loc 1 46 3 view .LVU54
  46:Core/Src/tcp_client.c ****   {
 307              		.loc 1 46 18 is_stmt 0 view .LVU55
 308 0002 134B     		ldr	r3, .L26
 309 0004 1B68     		ldr	r3, [r3]
  46:Core/Src/tcp_client.c ****   {
 310              		.loc 1 46 6 view .LVU56
 311 0006 6BB1     		cbz	r3, .L24
 312              	.L21:
  57:Core/Src/tcp_client.c ****   err = tcp_connect(pcb_client, &server_addr, SERVER_PORT, tcp_callback_connected); //connect
 313              		.loc 1 57 3 is_stmt 1 view .LVU57
 314 0008 1249     		ldr	r1, .L26+4
 315 000a 134B     		ldr	r3, .L26+8
 316 000c 0B60     		str	r3, [r1]
  58:Core/Src/tcp_client.c **** 
 317              		.loc 1 58 3 view .LVU58
  58:Core/Src/tcp_client.c **** 
 318              		.loc 1 58 9 is_stmt 0 view .LVU59
 319 000e 134B     		ldr	r3, .L26+12
 320 0010 41F2BA32 		movw	r2, #5050
 321 0014 0E48     		ldr	r0, .L26
 322 0016 0068     		ldr	r0, [r0]
 323 0018 FFF7FEFF 		bl	tcp_connect
 324              	.LVL26:
  60:Core/Src/tcp_client.c ****   {
 325              		.loc 1 60 3 is_stmt 1 view .LVU60
  60:Core/Src/tcp_client.c ****   {
 326              		.loc 1 60 5 is_stmt 0 view .LVU61
 327 001c 10F10A0F 		cmn	r0, #10
 328 0020 13D0     		beq	.L25
 329              	.LVL27:
 330              	.L20:
  64:Core/Src/tcp_client.c **** 
 331              		.loc 1 64 1 view .LVU62
 332 0022 08BD     		pop	{r3, pc}
 333              	.L24:
  48:Core/Src/tcp_client.c ****     if (pcb_client == NULL) //lack of memory
 334              		.loc 1 48 5 is_stmt 1 view .LVU63
  48:Core/Src/tcp_client.c ****     if (pcb_client == NULL) //lack of memory
 335              		.loc 1 48 18 is_stmt 0 view .LVU64
 336 0024 FFF7FEFF 		bl	tcp_new
 337              	.LVL28:
  48:Core/Src/tcp_client.c ****     if (pcb_client == NULL) //lack of memory
 338              		.loc 1 48 16 view .LVU65
 339 0028 094B     		ldr	r3, .L26
 340 002a 1860     		str	r0, [r3]
  49:Core/Src/tcp_client.c ****     {
 341              		.loc 1 49 5 is_stmt 1 view .LVU66
  49:Core/Src/tcp_client.c ****     {
 342              		.loc 1 49 8 is_stmt 0 view .LVU67
 343 002c 0028     		cmp	r0, #0
 344 002e EBD1     		bne	.L21
  51:Core/Src/tcp_client.c ****       pcb_client = NULL;
 345              		.loc 1 51 7 is_stmt 1 view .LVU68
 346 0030 0146     		mov	r1, r0
 347 0032 0120     		movs	r0, #1
 348 0034 FFF7FEFF 		bl	memp_free
ARM GAS  /tmp/ccPT9Xa3.s 			page 12


 349              	.LVL29:
  52:Core/Src/tcp_client.c ****       HAL_GPIO_WritePin(LD2_GPIO_Port, LD2_Pin, GPIO_PIN_SET); //error led
 350              		.loc 1 52 7 view .LVU69
  52:Core/Src/tcp_client.c ****       HAL_GPIO_WritePin(LD2_GPIO_Port, LD2_Pin, GPIO_PIN_SET); //error led
 351              		.loc 1 52 18 is_stmt 0 view .LVU70
 352 0038 054B     		ldr	r3, .L26
 353 003a 0022     		movs	r2, #0
 354 003c 1A60     		str	r2, [r3]
  53:Core/Src/tcp_client.c ****     }
 355              		.loc 1 53 7 is_stmt 1 view .LVU71
 356 003e 0122     		movs	r2, #1
 357 0040 8021     		movs	r1, #128
 358 0042 0748     		ldr	r0, .L26+16
 359 0044 FFF7FEFF 		bl	HAL_GPIO_WritePin
 360              	.LVL30:
 361 0048 DEE7     		b	.L21
 362              	.LVL31:
 363              	.L25:
  62:Core/Src/tcp_client.c ****   }
 364              		.loc 1 62 5 view .LVU72
 365 004a FFF7FEFF 		bl	app_close_conn
 366              	.LVL32:
  64:Core/Src/tcp_client.c **** 
 367              		.loc 1 64 1 is_stmt 0 view .LVU73
 368 004e E8E7     		b	.L20
 369              	.L27:
 370              		.align	2
 371              	.L26:
 372 0050 00000000 		.word	.LANCHOR2
 373 0054 00000000 		.word	.LANCHOR3
 374 0058 C0A801C0 		.word	-1073633088
 375 005c 00000000 		.word	tcp_callback_connected
 376 0060 00040240 		.word	1073873920
 377              		.cfi_endproc
 378              	.LFE168:
 380              		.section	.rodata.tcp_callback_received.str1.4,"aMS",%progbits,1
 381              		.align	2
 382              	.LC0:
 383 0000 25303464 		.ascii	"%04d-%02d-%02d %02d:%02d:%02d\012\000"
 383      2D253032 
 383      642D2530 
 383      32642025 
 383      3032643A 
 384              		.section	.text.tcp_callback_received,"ax",%progbits
 385              		.align	1
 386              		.syntax unified
 387              		.thumb
 388              		.thumb_func
 390              	tcp_callback_received:
 391              	.LVL33:
 392              	.LFB172:
 142:Core/Src/tcp_client.c ****   err_t ret_err;
 393              		.loc 1 142 1 is_stmt 1 view -0
 394              		.cfi_startproc
 395              		@ args = 0, pretend = 0, frame = 0
 396              		@ frame_needed = 0, uses_anonymous_args = 0
 142:Core/Src/tcp_client.c ****   err_t ret_err;
ARM GAS  /tmp/ccPT9Xa3.s 			page 13


 397              		.loc 1 142 1 is_stmt 0 view .LVU75
 398 0000 70B5     		push	{r4, r5, r6, lr}
 399              	.LCFI5:
 400              		.cfi_def_cfa_offset 16
 401              		.cfi_offset 4, -16
 402              		.cfi_offset 5, -12
 403              		.cfi_offset 6, -8
 404              		.cfi_offset 14, -4
 405 0002 84B0     		sub	sp, sp, #16
 406              	.LCFI6:
 407              		.cfi_def_cfa_offset 32
 143:Core/Src/tcp_client.c **** 
 408              		.loc 1 143 3 is_stmt 1 view .LVU76
 145:Core/Src/tcp_client.c ****   {
 409              		.loc 1 145 3 view .LVU77
 145:Core/Src/tcp_client.c ****   {
 410              		.loc 1 145 6 is_stmt 0 view .LVU78
 411 0004 5AB1     		cbz	r2, .L35
 412 0006 0846     		mov	r0, r1
 413              	.LVL34:
 145:Core/Src/tcp_client.c ****   {
 414              		.loc 1 145 6 view .LVU79
 415 0008 1C46     		mov	r4, r3
 416 000a 1546     		mov	r5, r2
 150:Core/Src/tcp_client.c ****   {
 417              		.loc 1 150 8 is_stmt 1 view .LVU80
 150:Core/Src/tcp_client.c ****   {
 418              		.loc 1 150 11 is_stmt 0 view .LVU81
 419 000c 5BB1     		cbz	r3, .L31
 152:Core/Src/tcp_client.c **** 
 420              		.loc 1 152 5 is_stmt 1 view .LVU82
 421 000e 1189     		ldrh	r1, [r2, #8]
 422              	.LVL35:
 152:Core/Src/tcp_client.c **** 
 423              		.loc 1 152 5 is_stmt 0 view .LVU83
 424 0010 FFF7FEFF 		bl	tcp_recved
 425              	.LVL36:
 154:Core/Src/tcp_client.c ****     ret_err = err;
 426              		.loc 1 154 5 is_stmt 1 view .LVU84
 427 0014 2846     		mov	r0, r5
 428 0016 FFF7FEFF 		bl	pbuf_free
 429              	.LVL37:
 155:Core/Src/tcp_client.c ****   }
 430              		.loc 1 155 5 view .LVU85
 155:Core/Src/tcp_client.c ****   }
 431              		.loc 1 155 13 is_stmt 0 view .LVU86
 432 001a 2046     		mov	r0, r4
 433 001c 1EE0     		b	.L30
 434              	.LVL38:
 435              	.L35:
 147:Core/Src/tcp_client.c ****     ret_err = ERR_OK;
 436              		.loc 1 147 5 is_stmt 1 view .LVU87
 437 001e FFF7FEFF 		bl	app_close_conn
 438              	.LVL39:
 148:Core/Src/tcp_client.c ****   }
 439              		.loc 1 148 5 view .LVU88
 148:Core/Src/tcp_client.c ****   }
ARM GAS  /tmp/ccPT9Xa3.s 			page 14


 440              		.loc 1 148 13 is_stmt 0 view .LVU89
 441 0022 0020     		movs	r0, #0
 442 0024 1AE0     		b	.L30
 443              	.LVL40:
 444              	.L31:
 159:Core/Src/tcp_client.c **** 
 445              		.loc 1 159 5 is_stmt 1 view .LVU90
 446 0026 1189     		ldrh	r1, [r2, #8]
 447 0028 FFF7FEFF 		bl	tcp_recved
 448              	.LVL41:
 161:Core/Src/tcp_client.c ****     nRead += p->len;
 449              		.loc 1 161 5 view .LVU91
 161:Core/Src/tcp_client.c ****     nRead += p->len;
 450              		.loc 1 161 20 is_stmt 0 view .LVU92
 451 002c 1B4E     		ldr	r6, .L38
 452 002e 3088     		ldrh	r0, [r6]
 161:Core/Src/tcp_client.c ****     nRead += p->len;
 453              		.loc 1 161 5 view .LVU93
 454 0030 6A89     		ldrh	r2, [r5, #10]
 455 0032 6968     		ldr	r1, [r5, #4]
 456 0034 1A4B     		ldr	r3, .L38+4
 457 0036 03EB0020 		add	r0, r3, r0, lsl #8
 458 003a FFF7FEFF 		bl	memcpy
 459              	.LVL42:
 162:Core/Src/tcp_client.c **** 
 460              		.loc 1 162 5 is_stmt 1 view .LVU94
 162:Core/Src/tcp_client.c **** 
 461              		.loc 1 162 15 is_stmt 0 view .LVU95
 462 003e 6B89     		ldrh	r3, [r5, #10]
 162:Core/Src/tcp_client.c **** 
 463              		.loc 1 162 11 view .LVU96
 464 0040 3288     		ldrh	r2, [r6]
 465 0042 1344     		add	r3, r3, r2
 466 0044 9BB2     		uxth	r3, r3
 467 0046 3380     		strh	r3, [r6]	@ movhi
 164:Core/Src/tcp_client.c ****     {
 468              		.loc 1 164 5 is_stmt 1 view .LVU97
 164:Core/Src/tcp_client.c ****     {
 469              		.loc 1 164 7 is_stmt 0 view .LVU98
 470 0048 B3F5807F 		cmp	r3, #256
 471 004c 08D0     		beq	.L36
 472              	.L32:
 174:Core/Src/tcp_client.c ****     {
 473              		.loc 1 174 10 is_stmt 1 view .LVU99
 174:Core/Src/tcp_client.c ****     {
 474              		.loc 1 174 12 is_stmt 0 view .LVU100
 475 004e B3F5807F 		cmp	r3, #256
 476 0052 1DD8     		bhi	.L37
 477              	.L33:
 180:Core/Src/tcp_client.c ****     ret_err = ERR_OK;
 478              		.loc 1 180 5 is_stmt 1 view .LVU101
 479 0054 2846     		mov	r0, r5
 480 0056 FFF7FEFF 		bl	pbuf_free
 481              	.LVL43:
 181:Core/Src/tcp_client.c ****   }
 482              		.loc 1 181 5 view .LVU102
 181:Core/Src/tcp_client.c ****   }
ARM GAS  /tmp/ccPT9Xa3.s 			page 15


 483              		.loc 1 181 13 is_stmt 0 view .LVU103
 484 005a 2046     		mov	r0, r4
 485              	.LVL44:
 486              	.L30:
 184:Core/Src/tcp_client.c **** }
 487              		.loc 1 184 3 is_stmt 1 view .LVU104
 185:Core/Src/tcp_client.c **** 
 488              		.loc 1 185 1 is_stmt 0 view .LVU105
 489 005c 04B0     		add	sp, sp, #16
 490              	.LCFI7:
 491              		.cfi_remember_state
 492              		.cfi_def_cfa_offset 16
 493              		@ sp needed
 494 005e 70BD     		pop	{r4, r5, r6, pc}
 495              	.LVL45:
 496              	.L36:
 497              	.LCFI8:
 498              		.cfi_restore_state
 164:Core/Src/tcp_client.c ****     {
 499              		.loc 1 164 53 discriminator 1 view .LVU106
 500 0060 0F4A     		ldr	r2, .L38+4
 501 0062 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 164:Core/Src/tcp_client.c ****     {
 502              		.loc 1 164 44 discriminator 1 view .LVU107
 503 0064 012A     		cmp	r2, #1
 504 0066 F2D1     		bne	.L32
 166:Core/Src/tcp_client.c **** 
 505              		.loc 1 166 7 is_stmt 1 view .LVU108
 166:Core/Src/tcp_client.c **** 
 506              		.loc 1 166 13 is_stmt 0 view .LVU109
 507 0068 0022     		movs	r2, #0
 508 006a 3280     		strh	r2, [r6]	@ movhi
 168:Core/Src/tcp_client.c ****              packet.year + 2000,
 509              		.loc 1 168 7 is_stmt 1 view .LVU110
 169:Core/Src/tcp_client.c ****              packet.month, packet.day, packet.hour, packet.minute, packet.second); //print time inf
 510              		.loc 1 169 20 is_stmt 0 view .LVU111
 511 006c 0C4A     		ldr	r2, .L38+4
 512 006e 9178     		ldrb	r1, [r2, #2]	@ zero_extendqisi2
 170:Core/Src/tcp_client.c **** 
 513              		.loc 1 170 46 view .LVU112
 514 0070 5379     		ldrb	r3, [r2, #5]	@ zero_extendqisi2
 170:Core/Src/tcp_client.c **** 
 515              		.loc 1 170 59 view .LVU113
 516 0072 9079     		ldrb	r0, [r2, #6]	@ zero_extendqisi2
 170:Core/Src/tcp_client.c **** 
 517              		.loc 1 170 74 view .LVU114
 518 0074 D679     		ldrb	r6, [r2, #7]	@ zero_extendqisi2
 168:Core/Src/tcp_client.c ****              packet.year + 2000,
 519              		.loc 1 168 7 view .LVU115
 520 0076 0296     		str	r6, [sp, #8]
 521 0078 0190     		str	r0, [sp, #4]
 522 007a 0093     		str	r3, [sp]
 523 007c 1379     		ldrb	r3, [r2, #4]	@ zero_extendqisi2
 524 007e D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 525 0080 01F5FA61 		add	r1, r1, #2000
 526 0084 0748     		ldr	r0, .L38+8
 527 0086 FFF7FEFF 		bl	printf
ARM GAS  /tmp/ccPT9Xa3.s 			page 16


 528              	.LVL46:
 172:Core/Src/tcp_client.c ****     }
 529              		.loc 1 172 7 is_stmt 1 view .LVU116
 530 008a FFF7FEFF 		bl	app_close_conn
 531              	.LVL47:
 532 008e E1E7     		b	.L33
 533              	.L37:
 176:Core/Src/tcp_client.c ****       app_close_conn(); //close connection
 534              		.loc 1 176 7 view .LVU117
 176:Core/Src/tcp_client.c ****       app_close_conn(); //close connection
 535              		.loc 1 176 13 is_stmt 0 view .LVU118
 536 0090 024B     		ldr	r3, .L38
 537 0092 0022     		movs	r2, #0
 538 0094 1A80     		strh	r2, [r3]	@ movhi
 177:Core/Src/tcp_client.c ****     }
 539              		.loc 1 177 7 is_stmt 1 view .LVU119
 540 0096 FFF7FEFF 		bl	app_close_conn
 541              	.LVL48:
 542 009a DBE7     		b	.L33
 543              	.L39:
 544              		.align	2
 545              	.L38:
 546 009c 00000000 		.word	.LANCHOR4
 547 00a0 00000000 		.word	.LANCHOR0
 548 00a4 00000000 		.word	.LC0
 549              		.cfi_endproc
 550              	.LFE172:
 552              		.section	.text.tcp_callback_sent,"ax",%progbits
 553              		.align	1
 554              		.syntax unified
 555              		.thumb
 556              		.thumb_func
 558              	tcp_callback_sent:
 559              	.LVL49:
 560              	.LFB171:
 113:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(arg);
 561              		.loc 1 113 1 view -0
 562              		.cfi_startproc
 563              		@ args = 0, pretend = 0, frame = 0
 564              		@ frame_needed = 0, uses_anonymous_args = 0
 113:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(arg);
 565              		.loc 1 113 1 is_stmt 0 view .LVU121
 566 0000 08B5     		push	{r3, lr}
 567              	.LCFI9:
 568              		.cfi_def_cfa_offset 8
 569              		.cfi_offset 3, -8
 570              		.cfi_offset 14, -4
 114:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(tpcb);
 571              		.loc 1 114 3 is_stmt 1 view .LVU122
 115:Core/Src/tcp_client.c ****   LWIP_UNUSED_ARG(len);
 572              		.loc 1 115 3 view .LVU123
 116:Core/Src/tcp_client.c **** 
 573              		.loc 1 116 3 view .LVU124
 118:Core/Src/tcp_client.c **** 
 574              		.loc 1 118 3 view .LVU125
 118:Core/Src/tcp_client.c **** 
 575              		.loc 1 118 12 is_stmt 0 view .LVU126
ARM GAS  /tmp/ccPT9Xa3.s 			page 17


 576 0002 0F4B     		ldr	r3, .L46
 577 0004 1988     		ldrh	r1, [r3]
 578              	.LVL50:
 118:Core/Src/tcp_client.c **** 
 579              		.loc 1 118 12 view .LVU127
 580 0006 0A44     		add	r2, r2, r1
 581              	.LVL51:
 118:Core/Src/tcp_client.c **** 
 582              		.loc 1 118 12 view .LVU128
 583 0008 92B2     		uxth	r2, r2
 584 000a 1A80     		strh	r2, [r3]	@ movhi
 120:Core/Src/tcp_client.c ****   {
 585              		.loc 1 120 3 is_stmt 1 view .LVU129
 120:Core/Src/tcp_client.c ****   {
 586              		.loc 1 120 5 is_stmt 0 view .LVU130
 587 000c FF2A     		cmp	r2, #255
 588 000e 0BD9     		bls	.L45
 124:Core/Src/tcp_client.c ****   {
 589              		.loc 1 124 8 is_stmt 1 view .LVU131
 124:Core/Src/tcp_client.c ****   {
 590              		.loc 1 124 10 is_stmt 0 view .LVU132
 591 0010 B2F5807F 		cmp	r2, #256
 592 0014 0DD9     		bls	.L43
 126:Core/Src/tcp_client.c ****     app_close_conn();
 593              		.loc 1 126 5 is_stmt 1 view .LVU133
 594 0016 0122     		movs	r2, #1
 595 0018 8021     		movs	r1, #128
 596 001a 0A48     		ldr	r0, .L46+4
 597              	.LVL52:
 126:Core/Src/tcp_client.c ****     app_close_conn();
 598              		.loc 1 126 5 is_stmt 0 view .LVU134
 599 001c FFF7FEFF 		bl	HAL_GPIO_WritePin
 600              	.LVL53:
 127:Core/Src/tcp_client.c ****   }
 601              		.loc 1 127 5 is_stmt 1 view .LVU135
 602 0020 FFF7FEFF 		bl	app_close_conn
 603              	.LVL54:
 604              	.L42:
 134:Core/Src/tcp_client.c **** }
 605              		.loc 1 134 3 view .LVU136
 135:Core/Src/tcp_client.c **** 
 606              		.loc 1 135 1 is_stmt 0 view .LVU137
 607 0024 0020     		movs	r0, #0
 608 0026 08BD     		pop	{r3, pc}
 609              	.LVL55:
 610              	.L45:
 122:Core/Src/tcp_client.c ****   }
 611              		.loc 1 122 5 is_stmt 1 view .LVU138
 612 0028 074B     		ldr	r3, .L46+8
 613 002a 1868     		ldr	r0, [r3]
 614              	.LVL56:
 122:Core/Src/tcp_client.c ****   }
 615              		.loc 1 122 5 is_stmt 0 view .LVU139
 616 002c FFF7FEFF 		bl	tcp_output
 617              	.LVL57:
 618 0030 F8E7     		b	.L42
 619              	.LVL58:
ARM GAS  /tmp/ccPT9Xa3.s 			page 18


 620              	.L43:
 131:Core/Src/tcp_client.c ****   }
 621              		.loc 1 131 5 is_stmt 1 view .LVU140
 622 0032 4FF48041 		mov	r1, #16384
 623 0036 0348     		ldr	r0, .L46+4
 624              	.LVL59:
 131:Core/Src/tcp_client.c ****   }
 625              		.loc 1 131 5 is_stmt 0 view .LVU141
 626 0038 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 627              	.LVL60:
 628 003c F2E7     		b	.L42
 629              	.L47:
 630 003e 00BF     		.align	2
 631              	.L46:
 632 0040 00000000 		.word	.LANCHOR1
 633 0044 00040240 		.word	1073873920
 634 0048 00000000 		.word	.LANCHOR2
 635              		.cfi_endproc
 636              	.LFE171:
 638              		.section	.text.app_start_get_time,"ax",%progbits
 639              		.align	1
 640              		.global	app_start_get_time
 641              		.syntax unified
 642              		.thumb
 643              		.thumb_func
 645              	app_start_get_time:
 646              	.LFB167:
  34:Core/Src/tcp_client.c ****   app_open_conn();
 647              		.loc 1 34 1 is_stmt 1 view -0
 648              		.cfi_startproc
 649              		@ args = 0, pretend = 0, frame = 0
 650              		@ frame_needed = 0, uses_anonymous_args = 0
 651 0000 08B5     		push	{r3, lr}
 652              	.LCFI10:
 653              		.cfi_def_cfa_offset 8
 654              		.cfi_offset 3, -8
 655              		.cfi_offset 14, -4
  35:Core/Src/tcp_client.c **** }
 656              		.loc 1 35 3 view .LVU143
 657 0002 FFF7FEFF 		bl	app_open_conn
 658              	.LVL61:
  36:Core/Src/tcp_client.c **** 
 659              		.loc 1 36 1 is_stmt 0 view .LVU144
 660 0006 08BD     		pop	{r3, pc}
 661              		.cfi_endproc
 662              	.LFE167:
 664              		.global	nWritten
 665              		.global	nRead
 666              		.global	packet
 667              		.section	.bss.nRead,"aw",%nobits
 668              		.align	1
 669              		.set	.LANCHOR4,. + 0
 672              	nRead:
 673 0000 0000     		.space	2
 674              		.section	.bss.nWritten,"aw",%nobits
 675              		.align	1
 676              		.set	.LANCHOR1,. + 0
ARM GAS  /tmp/ccPT9Xa3.s 			page 19


 679              	nWritten:
 680 0000 0000     		.space	2
 681              		.section	.bss.packet,"aw",%nobits
 682              		.align	2
 683              		.set	.LANCHOR0,. + 0
 686              	packet:
 687 0000 00000000 		.space	256
 687      00000000 
 687      00000000 
 687      00000000 
 687      00000000 
 688              		.section	.bss.pcb_client,"aw",%nobits
 689              		.align	2
 690              		.set	.LANCHOR2,. + 0
 693              	pcb_client:
 694 0000 00000000 		.space	4
 695              		.section	.bss.server_addr,"aw",%nobits
 696              		.align	2
 697              		.set	.LANCHOR3,. + 0
 700              	server_addr:
 701 0000 00000000 		.space	4
 702              		.text
 703              	.Letext0:
 704              		.file 2 "/usr/share/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/machine/_default_types.h"
 705              		.file 3 "/usr/share/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/sys/_stdint.h"
 706              		.file 4 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 707              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/stm32f746xx.h"
 708              		.file 6 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal_gpio.h"
 709              		.file 7 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 710              		.file 8 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpbase.h"
 711              		.file 9 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 712              		.file 10 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 713              		.file 11 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 714              		.file 12 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 715              		.file 13 "Middlewares/Third_Party/LwIP/src/include/lwip/tcp.h"
 716              		.file 14 "Core/Inc/tcp_client.h"
 717              		.file 15 "/usr/share/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/stdio.h"
 718              		.file 16 "/usr/share/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/string.h"
 719              		.file 17 "<built-in>"
ARM GAS  /tmp/ccPT9Xa3.s 			page 20


DEFINED SYMBOLS
                            *ABS*:0000000000000000 tcp_client.c
     /tmp/ccPT9Xa3.s:20     .text.tcp_callback_poll:0000000000000000 $t
     /tmp/ccPT9Xa3.s:25     .text.tcp_callback_poll:0000000000000000 tcp_callback_poll
     /tmp/ccPT9Xa3.s:44     .text.tcp_callback_error:0000000000000000 $t
     /tmp/ccPT9Xa3.s:49     .text.tcp_callback_error:0000000000000000 tcp_callback_error
     /tmp/ccPT9Xa3.s:79     .text.tcp_callback_error:0000000000000010 $d
     /tmp/ccPT9Xa3.s:84     .text.app_send_data:0000000000000000 $t
     /tmp/ccPT9Xa3.s:89     .text.app_send_data:0000000000000000 app_send_data
     /tmp/ccPT9Xa3.s:135    .text.app_send_data:0000000000000034 $d
     /tmp/ccPT9Xa3.s:142    .text.tcp_callback_connected:0000000000000000 $t
     /tmp/ccPT9Xa3.s:147    .text.tcp_callback_connected:0000000000000000 tcp_callback_connected
     /tmp/ccPT9Xa3.s:220    .text.tcp_callback_connected:0000000000000044 $d
     /tmp/ccPT9Xa3.s:558    .text.tcp_callback_sent:0000000000000000 tcp_callback_sent
     /tmp/ccPT9Xa3.s:390    .text.tcp_callback_received:0000000000000000 tcp_callback_received
     /tmp/ccPT9Xa3.s:228    .text.app_close_conn:0000000000000000 $t
     /tmp/ccPT9Xa3.s:233    .text.app_close_conn:0000000000000000 app_close_conn
     /tmp/ccPT9Xa3.s:284    .text.app_close_conn:000000000000003c $d
     /tmp/ccPT9Xa3.s:289    .text.app_open_conn:0000000000000000 $t
     /tmp/ccPT9Xa3.s:294    .text.app_open_conn:0000000000000000 app_open_conn
     /tmp/ccPT9Xa3.s:372    .text.app_open_conn:0000000000000050 $d
     /tmp/ccPT9Xa3.s:381    .rodata.tcp_callback_received.str1.4:0000000000000000 $d
     /tmp/ccPT9Xa3.s:385    .text.tcp_callback_received:0000000000000000 $t
     /tmp/ccPT9Xa3.s:546    .text.tcp_callback_received:000000000000009c $d
     /tmp/ccPT9Xa3.s:553    .text.tcp_callback_sent:0000000000000000 $t
     /tmp/ccPT9Xa3.s:632    .text.tcp_callback_sent:0000000000000040 $d
     /tmp/ccPT9Xa3.s:639    .text.app_start_get_time:0000000000000000 $t
     /tmp/ccPT9Xa3.s:645    .text.app_start_get_time:0000000000000000 app_start_get_time
     /tmp/ccPT9Xa3.s:679    .bss.nWritten:0000000000000000 nWritten
     /tmp/ccPT9Xa3.s:672    .bss.nRead:0000000000000000 nRead
     /tmp/ccPT9Xa3.s:686    .bss.packet:0000000000000000 packet
     /tmp/ccPT9Xa3.s:668    .bss.nRead:0000000000000000 $d
     /tmp/ccPT9Xa3.s:675    .bss.nWritten:0000000000000000 $d
     /tmp/ccPT9Xa3.s:682    .bss.packet:0000000000000000 $d
     /tmp/ccPT9Xa3.s:689    .bss.pcb_client:0000000000000000 $d
     /tmp/ccPT9Xa3.s:693    .bss.pcb_client:0000000000000000 pcb_client
     /tmp/ccPT9Xa3.s:696    .bss.server_addr:0000000000000000 $d
     /tmp/ccPT9Xa3.s:700    .bss.server_addr:0000000000000000 server_addr

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
memset
tcp_write
tcp_setprio
tcp_arg
tcp_sent
tcp_recv
tcp_err
tcp_poll
tcp_close
tcp_connect
tcp_new
memp_free
tcp_recved
pbuf_free
memcpy
printf
ARM GAS  /tmp/ccPT9Xa3.s 			page 21


tcp_output
HAL_GPIO_TogglePin
